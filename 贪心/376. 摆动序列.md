### **376. æ‘†åŠ¨åºåˆ—**

------

#### ğŸ§¾ é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œå¦‚æœç›¸é‚»å…ƒç´ ä¹‹é—´çš„å·®å€¼äº¤æ›¿æ­£è´Ÿï¼ˆå³â€œæ‘†åŠ¨â€ï¼‰ï¼Œåˆ™ç§°è¯¥æ•°ç»„ä¸ºæ‘†åŠ¨åºåˆ—ã€‚

- ç›¸é‚»ä¸¤å…ƒç´ å·®å€¼ä¸èƒ½ä¸º 0ï¼›
- å·®å€¼çš„æ­£è´Ÿäº¤æ›¿å‡ºç°ã€‚

æ±‚ `nums` çš„ **æœ€é•¿æ‘†åŠ¨å­åºåˆ—** çš„é•¿åº¦ã€‚å­åºåˆ—ä¸è¦æ±‚è¿ç»­ï¼Œä½†éœ€ä¿æŒç›¸å¯¹é¡ºåºã€‚

------

#### ğŸ’¡ è´ªå¿ƒè§£æ³•æ€è·¯

ç»´æŠ¤ä¸¤ä¸ªçŠ¶æ€å˜é‡ï¼š

- `up`ï¼šä»¥æ­£å‘å·®ï¼ˆä¸Šå‡ï¼‰ç»“å°¾çš„æœ€é•¿æ‘†åŠ¨é•¿åº¦ï¼›
- `down`ï¼šä»¥è´Ÿå‘å·®ï¼ˆä¸‹é™ï¼‰ç»“å°¾çš„æœ€é•¿æ‘†åŠ¨é•¿åº¦ã€‚

å¼€å§‹æ—¶ï¼Œå•ä¸ªå…ƒç´ æ—¢ç®—ä½œä¸Šå‡ä¹Ÿç®—ä½œä¸‹é™ï¼Œéƒ½åˆå§‹åŒ–ä¸º `1`ã€‚ä»ç¬¬äºŒä¸ªå…ƒç´ å¾€åéå†ï¼š

1. å¦‚æœ `nums[i] > nums[iâˆ’1]`ï¼Œè¯´æ˜å‡ºç°ä¸€æ¬¡â€œä¸Šå‡æ‘†åŠ¨â€ï¼Œå¯ä»¥æŠŠä¹‹å‰ä»¥ä¸‹é™ç»“å°¾çš„åºåˆ—å†åŠ ä¸Šè¿™æ¬¡ä¸Šå‡ï¼š

   ```java
   up = down + 1;
   ```

2. å¦‚æœ `nums[i] < nums[iâˆ’1]`ï¼Œè¯´æ˜å‡ºç°ä¸€æ¬¡â€œä¸‹é™æ‘†åŠ¨â€ï¼Œå¯ä»¥æŠŠä¹‹å‰ä»¥ä¸Šå‡ç»“å°¾çš„åºåˆ—å†åŠ ä¸Šè¿™æ¬¡ä¸‹é™ï¼š

   ```java
   down = up + 1;
   ```

3. ç›¸ç­‰æ—¶æ—¢ä¸èƒ½ä¸Šå‡ä¹Ÿä¸èƒ½ä¸‹é™ï¼ŒäºŒè€…ä¿æŒä¸å˜ã€‚

æœ€ç»ˆç­”æ¡ˆå³ä¸º `max(up, down)`ï¼Œè¡¨ç¤ºä»¥ä»»ä¸€æ–¹å‘ç»“å°¾çš„æœ€é•¿æ‘†åŠ¨åºåˆ—ã€‚

------

#### âœ… ä»£ç å®ç°ï¼ˆå¸¦ä¸­æ–‡æ³¨é‡Šï¼‰

```java
class Solution {
    public int wiggleMaxLength(int[] nums) {
        int n = nums.length;
        // å°‘äº 2 ä¸ªå…ƒç´ æ—¶ï¼Œæœ¬èº«å°±æ˜¯æ‘†åŠ¨åºåˆ—
        if (n < 2) {
            return n;
        }

        // upï¼šä»¥æ­£å‘å·®ç»“å°¾çš„æœ€é•¿æ‘†åŠ¨é•¿åº¦
        // downï¼šä»¥è´Ÿå‘å·®ç»“å°¾çš„æœ€é•¿æ‘†åŠ¨é•¿åº¦
        int up = 1, down = 1;

        // ä»ç¬¬ 2 ä¸ªå…ƒç´ å¼€å§‹éå†
        for (int i = 1; i < n; i++) {
            if (nums[i] > nums[i - 1]) {
                // å‡ºç°â€œä¸Šå‡â€æ‘†åŠ¨
                up = down + 1;
            } else if (nums[i] < nums[i - 1]) {
                // å‡ºç°â€œä¸‹é™â€æ‘†åŠ¨
                down = up + 1;
            }
            // ç›¸ç­‰æ—¶ä¸åšä»»ä½•æ›´æ–°
        }

        // æœ€é•¿æ‘†åŠ¨åºåˆ—è¦ä¹ˆä»¥ä¸Šå‡ç»“å°¾ï¼Œè¦ä¹ˆä»¥ä¸‹é™ç»“å°¾
        return Math.max(up, down);
    }
}
```

------

#### â± æ—¶é—´å¤æ‚åº¦

- **O(n)**ï¼Œåªéå†ä¸€æ¬¡æ•°ç»„ã€‚

#### ğŸ§® ç©ºé—´å¤æ‚åº¦

- **O(1)**ï¼Œåªä½¿ç”¨å¸¸æ•°çº§é¢å¤–ç©ºé—´ï¼ˆä¸¤ä¸ªæ•´å‹å˜é‡ `up` å’Œ `down`ï¼‰ã€‚

------

#### ğŸ”š å°ç»“

- ç”¨ **åŒå˜é‡è´ªå¿ƒ** ç»´æŠ¤ã€Œä¸Šå‡/ä¸‹é™ã€ä¸¤ç§ç»“å°¾æƒ…å†µï¼›
- æ¯æ¬¡ä¸Šå‡å°±æ›´æ–° `up = down + 1`ï¼Œæ¯æ¬¡ä¸‹é™å°±æ›´æ–° `down = up + 1`ï¼›
- ç®€æ´é«˜æ•ˆï¼Œä¸€æ¬¡éå†å³å¯å®Œæˆã€‚