### **47. å…¨æ’åˆ— II** 

------

#### ğŸ” é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå¯èƒ½åŒ…å«é‡å¤æ•°å­—çš„æ•´æ•°æ•°ç»„ `nums`ï¼Œè¦æ±‚è¿”å›æ‰€æœ‰**ä¸é‡å¤**çš„å…¨æ’åˆ—ã€‚

------

#### ğŸ’¡ è§£é¢˜æ€è·¯

1. **å…ˆæ’åº**ï¼šå°†ç›¸åŒæ•°å­—èšé›†åœ¨ä¸€èµ·ï¼Œä¾¿äºåç»­å»é‡ã€‚
2. **å›æº¯ + `used[]`**ï¼šç”¨å¸ƒå°”æ•°ç»„è®°å½•æ¯ä¸ªä½ç½®çš„æ•°å­—æ˜¯å¦å·²è¢«åŠ å…¥è·¯å¾„ `path`ã€‚
3. **å»é‡æŠ€å·§**
   - **æ ‘å±‚å»é‡ï¼ˆTreeâ€level dedupï¼‰**ï¼šåœ¨åŒä¸€å±‚æšä¸¾æ—¶ï¼Œå¦‚æœå½“å‰æ•°å­— `nums[i]` ä¸å‰ä¸€ä¸ªæ•°å­—ç›¸åŒ **ä¸”** å‰ä¸€ä¸ªæ•°å­—åœ¨æœ¬å±‚ã€Œè¿˜æœªè¢«ä½¿ç”¨ã€(`!used[i-1]`)ï¼Œå°±è·³è¿‡ï¼›
   - **æä¸Šå»é‡ï¼ˆBranchâ€level dedupï¼‰**ï¼šå¦‚æœå½“å‰æ•°å­—å·²ç»è¢«ç”¨è¿‡ (`used[i] == true`)ï¼Œä¹Ÿè¦è·³è¿‡ã€‚

------

#### âœ… æ­£ç¡®ä»£ç ï¼ˆå«è¯¦ç»†æ³¨é‡Šï¼‰

```java
class Solution {
    private List<List<Integer>> result = new ArrayList<>();
    private List<Integer> path   = new ArrayList<>();
    private boolean[] used;      // æ ‡è®°æ¯ä¸ªä½ç½®æ˜¯å¦å·²åœ¨ path ä¸­

    public List<List<Integer>> permuteUnique(int[] nums) {
        Arrays.sort(nums);        // 1. å…ˆæ’åºï¼Œè®©ç›¸åŒæ•°å­—ç›¸é‚»
        used = new boolean[nums.length];
        backtracking(nums);
        return result;
    }

    private void backtracking(int[] nums) {
        // ç»ˆæ­¢æ¡ä»¶ï¼šå½“å‰ path é•¿åº¦ç­‰äº nums é•¿åº¦
        if (path.size() == nums.length) {
            result.add(new ArrayList<>(path));
            return;
        }

        // æšä¸¾ä¸‹ä¸€å±‚è¦æ”¾å…¥çš„ä½ç½®
        for (int i = 0; i < nums.length; i++) {
            // â€”â€” æä¸Šå»é‡ï¼ˆBranchâ€level dedupï¼‰ â€”â€” 
            // å¦‚æœ nums[i] å·²è¢«ä¸Šå±‚é€‰è¿‡ï¼Œå°±ä¸èƒ½å†æ¬¡ä½¿ç”¨
            if (used[i]) {
                continue;
            }
            // â€”â€” æ ‘å±‚å»é‡ï¼ˆTreeâ€level dedupï¼‰ â€”â€” 
            // è¯´æ˜åœ¨æœ¬å±‚å·²ç»å°è¯•è¿‡â€œå…ˆç”¨ nums[i-1] å†ç”¨ nums[i]â€çš„åˆ†æ”¯ï¼Œ
            // è¿™ä¼šäº§ç”Ÿé‡å¤æ’åˆ—ï¼Œæ•…è·³è¿‡ nums[i]
            if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]) {//used[i - 1]ä¹Ÿè¡Œï¼Œæ ‘æå»é‡
                continue;
            }

            // é€‰æ‹© nums[i]
            used[i] = true;
            path.add(nums[i]);

            // é€’å½’ï¼šç»§ç»­ä¸ºä¸‹ä¸€ä¸ªä½ç½®å¡«æ•°å­—
            backtracking(nums);

            // å›æº¯ï¼šæ’¤é”€é€‰æ‹©
            path.remove(path.size() - 1);
            used[i] = false;
        }
    }
}
```

------

#### ğŸ“ æ ¸å¿ƒè¦ç‚¹

1. **æ’åº**ï¼šè®©ç›¸åŒæ•°å­—ç›¸é‚»ï¼Œé…åˆ `nums[i] == nums[i-1]` åˆ¤æ–­ã€‚
2. **`used[i]`**ï¼šå…¨å±€æ ‡è®°ï¼Œæ¯ä¸ªæ•°å­—åœ¨è·¯å¾„ä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
3. **æä¸Šå»é‡** (`if (used[i]) continue;`)
   - ä¿è¯ä¸€ä¸ªåˆ†æ”¯é‡Œä¸é‡å¤é€‰åŒä¸€ä¸ªä½ç½®çš„æ•°å­—ã€‚
4. **æ ‘å±‚å»é‡** (`if (i > 0 && nums[i] == nums[i-1] && !used[i-1]) continue;`)
   - ä¿è¯åŒä¸€æ ‘å±‚ä¸­ï¼Œç›¸åŒæ•°å­—åª**ç¬¬ä¸€æ¬¡**è¢«ç”¨äºåˆ†æ”¯ï¼Œåç»­ç›¸åŒæ•°å­—è·³è¿‡ï¼Œé¿å…é‡å¤æ’åˆ—ã€‚

------

#### â± å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šè¿‘ä¼¼ `O(n! Ã— n)`ï¼Œå…¶ä¸­ `n` ä¸ºæ•°ç»„é•¿åº¦ï¼›æ’åºéœ€è¦ `O(n log n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)` é€’å½’æ ˆ + `O(n)` è·¯å¾„è®°å½• + `O(n!)` ç»“æœå­˜å‚¨ã€‚

------

#### ğŸ”š æ€»ç»“

- å…¨æ’åˆ— II çš„å…³é”®åœ¨äº **åŒé‡å»é‡**ï¼š
  1. **æä¸Šå»é‡**ï¼šä½¿ç”¨ `used[]` é˜²æ­¢åŒä¸€åˆ†æ”¯é‡å¤å–åŒä¸€å…ƒç´ ï¼›
  2. **æ ‘å±‚å»é‡**ï¼šåœ¨åŒä¸€å±‚è·³è¿‡ã€Œå’Œå‰ä¸€ä¸ªç›¸åŒä¸”å‰ä¸€ä¸ªæœªè¢«ä½¿ç”¨ã€çš„åˆ†æ”¯ï¼Œé˜²æ­¢ç”Ÿæˆç›¸åŒçš„æ’åˆ—ã€‚
- è¿™ä¸€å¥—è·¯åŒæ ·é€‚ç”¨äºè®¸å¤šå«é‡å¤å…ƒç´ çš„ç»„åˆ/æ’åˆ—ç±»é¢˜ç›®ã€‚